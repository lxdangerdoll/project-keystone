<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
    <title>Project Keystone // Interactive Narrative | Synapse Comics</title>
    <meta name="description" content="Project Keystone is an interactive narrative where your choices permanently affect the official Synapse Comics storyline. Join the Porter Network and shape the future of storytelling." />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  </head>
  <body>
    <div id="root"></div>
    <script>
      // SPA GitHub Pages redirect decoder
      // If the URL contains ?/path, convert it back to the proper pathname
      (function() {
        var l = window.location;
        var q = l.search;
        if (q.startsWith('?/')) {
          var decoded = q.slice(2).split('&').join('?'); // support query passthrough
          // Normalize pathname (strip /index.html if present)
          var basePath = l.pathname;
          if (basePath.toLowerCase().endsWith('/index.html')) {
            basePath = basePath.slice(0, -('/index.html'.length)) + '/';
          }
          if (!basePath.endsWith('/')) basePath += '/';
          var newUrl = basePath + decoded + l.hash;
          window.history.replaceState(null, '', newUrl);
        }
      })();
    </script>
    <!-- Use relative path so Vite injects correct base prefix -->
    <script type="module" src="./src/main.tsx"></script>
  </body>
</html>
